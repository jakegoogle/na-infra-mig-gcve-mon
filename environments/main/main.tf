# Copyright 2019 Google LLC
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#no pr
#     https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.

# https://github.com/GoogleCloudPlatform/gcve-iac-foundations/tree/main/modules/gcve-monitoring
# https://cloud.google.com/vmware-engine/docs/environment/howto-cloud-monitoring-standalone



locals {
  env                           = "main"
}

module "gcve-monitoring" {
	 source  = "../../modules/gcve-monitoring"

	 # Required variables
	 gcve_region              = var.region
	 project                  = var.project
	 sa_gcve_monitoring       = var.sa_gcve_monitoring
	 secret_vsphere_password  = data.google_secret_manager_secret_version.eu_west6_vsphere_passwd_data.secret_data
	 secret_vsphere_server    = "vcsa-159135.fad11561.europe-west6.gve.goog"
	 secret_vsphere_user      = "CloudOwner@gve.local"
	 subnetwork               = var.subnetwork
	 vm_mon_name              = var.vm_mon_name
	 vm_mon_zone              = var.vm_mon_zone

	 # Optional variables
	 create_dashboards  = true
	 hc_healthy_threshold  = 2
	 hc_interval_sec  = 5
	 hc_timeout_sec  = 5
	 hc_unhealthy_threshold  = 2
	 initial_delay_sec  = 180
	 vm_mon_type  = var.vm_mon_type
}